# model.fitter

[Назад к списку компонентов](../README.md)

## Назначение

Компонент предназначен для обучения любой модели, как правило, статистическим алгоритмом или алгоритмом машинного обучения, на произвольном наборе данных. В наборе данных может присутствовать выходное поле (`target`). Оно требуется при использовании алгоритмов обучения на размеченных данных.

Если на второй входной порт **Тестовая выборка** подан набор данных, то к нему будет применена построенная модель.

Обученная модель может быть cохранена в сериализованный объект Python, после чего использоваться для прогона в компоненте **Model.Scorer**.

## Входные порты

| Название                | Тип        | Описание                            |
|:------------------------|:-----------|:------------------------------------|
| Обучающая выборка       | Таблица    |                                     |
| Тестовая выборка        | Таблица    | Необязательный входной набор данных |
| Входные переменные      | Переменные |                                     |

### Структура таблицы "Обучающая выборка"

На вход можно подать данные любой структуры. Столбцы, которые не планируется подавать на вход алгоритма обучения, не должны присутствовать в наборе данных, за исключением идентификатора объекта.

### Структура таблицы "Тестовая выборка"

На вход можно подать данные любой структуры, но структура должна совпадать с набором данных в порте **Обучающая выборка**.

### Переменные в порте "Входные переменные"

| №  | Метка                       | Тип                                   | Значение по умолчанию  |
|:---|:----------------------------|:--------------------------------------|:-----------------------|
| 1  | Импортируемый модуль        | ![](./img/string.svg) Строковый       |null                    |
| 2  | Импортируемый класс         | ![](./img/string.svg) Строковый       |null                    |
| 3  | Библиотека для сериализации | ![](./img/string.svg) Строковый       |pickle                  |
| 4  | Путь к файлу                | ![](./img/string.svg) Строковый       |null                    |
| 5  | Имя файла                   | ![](./img/string.svg) Строковый       |null                    |
| 6  | Метод для обучения          | ![](./img/string.svg) Строковый       |fit                     |
| 7  | Метод для скоринга          | ![](./img/string.svg) Строковый       |predict                 |
| 8  | Поле с идентификатором      | ![](./img/string.svg) Строковый       |null                    |
| 9  | Целевое поле                | ![](./img/string.svg) Строковый       |target                  |
| 10 | Выходное поле с разбиением  | ![](./img/string.svg) Строковый       |IsTestSet               |
| 11 | Игнорируемые поля           | ![](./img/string.svg) Строковый       |null                    |
| 12 | Удалять игнорируемые поля   | ![](./img/logicak.svg) Логический     |false                   |
| 13 | Имена выходов               | ![](./img/string.svg) Строковый       |null                    |
| 14 | Дополнительные выходы       | ![](./img/string.svg) Строковый       |null                    |
| 15 | Полный выходной датасет     | ![](./img/logicak.svg) Логический     |true                    |
| 16 | Сохранять метки полей       | ![](./img/logicak.svg) Логический     |true                    |
| 17 | Только коэффициенты         | ![](./img/logicak.svg) Логический     |false                   |
| 18 | params                      | ![](./img/string.svg) Строковый       |null                    |
| 19 | *Принудительные параметры   | ![](./img/string.svg) Строковый       |null                    |

1. **Импортируемый модуль** — название модуля Python, в котором находится импортируемый класс;
2. **Импортируемый класс** — название класса в импортируемом модуле Python;
3. **Библиотека для сериализации** — название python-модуля для сохранения объектов. Поддерживается pickle и joblib.
4. **Путь к файлу** — полный путь к файлу, где лежит файл с именем `model_filename`;
5. **Имя файла** — модель должна быть представлена в виде сериализованного объекта Python;
6. **Метод для обучения** — метод, который обучает модель, обычно `fit`
7. **Метод для скоринга** — метод, который прогоняет через модель, обычно `predict` или `predict_proba`
8. **Поле с идентификатором** — необязательный столбец, в котором содержится информация об идентификаторе объекта;
9. **Целевое поле** — имя поля с целевой переменной, если алгоритм требует ее;
10. **Выходное поле с разбиением** — имя поля, которое будет отвечать в выходном наборе данных за разбиение на обучающее и тестовое множества;
11. **Игнорируемые поля** — список имен полей (через запятую), которые не будут участвовать при прогоне через модель;
12. **Удалять игнорируемые поля** —  при значении `True` не включать игнорируемые поля в выходной датасет;
13. **Имена выходов** — список имен выходных столбцов через запятую. Если выходов меньше, чем длина списка, берутся первые из списка. Если null, то метки формируются по умолчанию (output1, output2, ...);
14. **Дополнительные выходы** — список столбцов через запятую, которые будут добавлены в результирующий набор данных. Является уникальным для каждого класса и может быть взят в документации к соответствующей Python-библиотеке;
15. **Полный выходной датасет** — при значении `True` включать в выходной датасет все входные поля, помимо результирующих (справедливо только для переменной **Только коэффициенты** = `True`);
16. **Сохранять метки полей** — при значении `True` восстанавливать метки полей, рекомендуется оставлять в `True` для большинства случаев;
17. **Только коэффициенты** — при значении **true** в выходном наборе данных будут выведены коэффициенты модели. Справедливо только для моделей, имеющих выходной метод `coef_`.;
18. **params** — список параметров в виде строки, которые нужно задать перед обучением модели. Данный список параметров является уникальным для каждой модели и описан в документации к соответствующей библиотеке Python;
19. ***Принудительные параметры** — список параметров в виде строки, которые нужно задать перед обучением модели. Они будут применены после вызова метода `params`.

## Выходные порты

| Название              | Тип        |
|:----------------------|:-----------|
| Выходной набор данных | Таблица    |

### Структура таблицы "Выходной набор данных"

В выходной набор данных попадает набор данных, сформированный методом класса, указанным в переменной `fit_method`, а также дополнительные столбцы из списка **Дополнительные выходы**.
В выходной набор добавляется столбец с именем, указанным в переменной **Выходное поле с разбиением** и меткой **Тестовое множество**.
Если переменная **Только коэффициенты** = `true`, то в результирующий набор порадают коэффициенты модели (`coef_`) и константа (`intercept`).